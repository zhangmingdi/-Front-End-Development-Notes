
### 比较好的解释
<https://juejin.cn/post/6844903873518239752>

### cdn简介
+ 源站内容发布全国节点
+ 将源站请求导向最近对缓存节点
+ 提高网站响应速度

### 首先先了解域名解析过程
+ 本地hosts文件->hosts缓存->本地DNS->根DNS->顶级域DNS->权威DNS
### dns记录类型
#### 4种字段构成一个记录，Name、Value、Type、TTL。其中Name和Value可以理解为一对键值对，但是其具体含义取决于Type的类型，TTL记录了该条记录应当从缓存中删除的时间。

+ A记录，域名name指向的value就是目标IP地址。
+ NS记录，域名name指向的value是解析该域名DNS服务的IP地址。
+ CNAME记录，域名name指向的value是另一个域名，另一个域名被A类型记录，其name对应的value最终指向的是目标IP。

### cdn服务的DNS解析
+ 全局负载均衡系统（GSLB）：主要功能是根据用户的本地DNS的IP地址判断用户的位置，筛选出距离用户较近的本地负载均衡系统（SLB）。
+ 本地负载均衡系统（SLB）：缓存服务器集群中是否包含用户请求的资源数据，如果缓存服务器中存在请求的资源，则根据缓存服务器集群中节点的健康程度、负载量、连接数等因素筛选出最优的缓存节点，并将HTTP请求重定向到最优的缓存节点上。

### cdn的大致过程
+ dns服务解析通过CNAME记录查找到全局负载均衡系统（GSLB)。
+ 全局负载均衡系统（GSLB)判断大概位置，寻找性能较好的靠近该地区的本地负载均衡系统（SLB）的IP。
+ 本地负载均衡系统（SLB）判断缓存服务集群是否存在请求资源，根据服务集群挑选性能较好的服务器，并将HTTP重定向至该服务器。
+ 该服务器判断是否存在缓存资源，无则想源服务器请求资源。